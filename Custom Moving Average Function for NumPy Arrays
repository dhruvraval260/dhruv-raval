import numpy as np

def moving_average(arr, window_size, mode='valid'):
    """
    Compute the moving average of a NumPy array.
    
    Parameters:
        arr (np.ndarray): Input array (1D).
        window_size (int): Size of the moving average window.
        mode (str): 'valid', 'same', or 'full' (like numpy.convolve).
        
    Returns:
        np.ndarray: The moving average result.
    """
    if window_size <= 0:
        raise ValueError("window_size must be > 0")
    if window_size > len(arr):
        raise ValueError("window_size must not exceed array length")

    kernel = np.ones(window_size) / window_size
    return np.convolve(arr, kernel, mode=mode)
